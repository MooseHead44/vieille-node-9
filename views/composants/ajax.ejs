

<%
	let elmBouton = document.getElementById('testAJAX')
	elmBouton.addEventListener('click', ()=>{
	console.log('ok')
	xhr = new XMLHttpRequest();
	xhr.open('POST', "testajax", true);
	data = {
	"nom" : "AAAA",
	"prenom" : "BBBB",
	"telephone" : "CCCC",
	"_id" : "2114322222542542345"
	}
	console.log(data)
	sData = JSON.stringify(data);
	xhr.setRequestHeader('Content-type', 'application/json');
	xhr.send(sData);
	xhr.addEventListener("readystatechange", traiterRequest, false);
	})

%>

<%

	function traiterRequest(e) {
		console.log("xhr.readyState = " + xhr.readyState)
		console.log("xhr.status = " + xhr.status)
		
		if(xhr.readyState == 4 && xhr.status == 200) {
			console.log('ajax fonctionne')
			let  maReponse = JSON.parse(xhr.responseText);
			console.log(xhr.responseText);
			console.log(maReponse._id)
		}
	}
%>